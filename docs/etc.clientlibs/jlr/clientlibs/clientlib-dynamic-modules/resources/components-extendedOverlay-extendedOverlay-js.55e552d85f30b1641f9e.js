"use strict";(self.webpackChunkaem_maven_archetype=self.webpackChunkaem_maven_archetype||[]).push([["components-extendedOverlay-extendedOverlay-js","components-modal-Modal-js","components-video-video-js"],{11122:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var n,r,i=o(99686),a=o(44746);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s="hide",d=(n=function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.el=t,this.duration=this.el.dataset.duration,this.videoTitle=this.el.dataset.videoTitle,this.closeLabel=this.el.dataset.closeLabel,this.uiSelectors={modalVideo:this.el.querySelector(".cmp-extended-overlay-video"),playOverlay:this.el.querySelector(".icon-play-v2")},this.init()},r=[{key:"init",value:function(){var e=this;document.querySelectorAll(".video.video--extended-overlay").forEach(function(t){t.addEventListener("timeupdate",function(){if(t.currentTime>=e.duration){var o;t.pause(),e.el.classList.remove(s),null===(o=e.el.closest(".cmp-hero-carousel").querySelector(".cmp-carousel__controls"))||void 0===o||o.classList.add(s)}})}),this.uiSelectors.playOverlay.addEventListener("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e._creatExtendedVideoModal()})}},{key:"_creatExtendedVideoModal",value:function(){this.modal=new i.default(this.el,{modalModifier:["ExtendedVideo"],headerTitle:this.videoTitle,fullScreenMode:!0,closeLabel:this.closeLabel}),this.modal.open(this.uiSelectors.modalVideo),this.el.addEventListener("Modal:opened",function(){new a.default(document.querySelector(".Modal--ExtendedVideo .cmp-extended-overlay-video .cmp-video")),document.querySelector(".mejs-container").setAttribute("aria-hidden","true"),document.querySelector(".Modal__background").setAttribute("aria-hidden","true"),document.querySelector(".Modal--ExtendedVideo .cmp-extended-overlay-video .cmp-video .mejs-time-rail").setAttribute("tabindex","0"),document.querySelector(".Modal--ExtendedVideo .cmp-extended-overlay-video .cmp-video .mejs-time-rail").setAttribute("aria-label","time rail"),document.querySelector(".Modal--ExtendedVideo .cmp-extended-overlay-video .cmp-video video").play()})}}],function(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(n.key),n)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n)},99686:function(e,t,o){o.r(t),o.d(t,{default:function(){return s}});var n=o(71202),r=o(69805);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(n.key),n)}}var s=function(){var e,t;function o(e,t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),this._defaults={className:"Modal",selector:".Modal",speed:350,modalModifier:null,closeLabel:null,enableClose:!0,fullScreenMode:!1,headerTitle:null,footer:!0},this.element=e,this._modal=null,this._modalContent=null,this.fullScreenClass="Modal--full-screen",this.options=Object.assign({},this._defaults,t)}return e=[{key:"_attachModal",value:function(){var e,t=this,o=document.createElement("section"),n=this.options,r=n.className,i=n.modalModifier,l=n.closeLabel,s=n.enableClose,d=n.fullScreenMode,c=n.headerTitle,u=s?'<button data-modal-close class="'.concat(r,'__close"></button>'):"",m='\n          <div class="'.concat(r,'__content-wrapper">\n            <div class="').concat(r,'__header">\n              ').concat(c?'<h2 class="Modal__header-title headline headline--s">'.concat(c,"</h2>"):"","\n              ").concat(u,'\n            </div>\n            <div data-modal-content class="').concat(r,'__content"></div>\n            <div data-modal-footer class="').concat(r,'__footer"></div>\n            <div data-modal-tab-target class="').concat(r,'__tab-target" tabindex="0"></div>\n          </div>\n        ');o.setAttribute("data-modal",""),o.setAttribute("role","dialog"),o.setAttribute("tabIndex","-1"),o.classList.add(r),d&&o.classList.add(this.fullScreenClass),null!==i&&(Array.isArray(i)||(this.options.modalModifier=i.split()),this.options.modalModifier.forEach(function(e){return o.classList.add("".concat(r,"--").concat(e))})),o.innerHTML=m,(document.querySelector(".mfp-content")||document.body).appendChild(o),this._modal=o;var f=o.querySelectorAll("[data-modal-content]")[0];this._modalContent=f;var v=o.querySelectorAll("[data-modal-footer]")[0];this._modalFooter=v,this.options.footer||this._modal.classList.add("".concat(r,"--hide-footer"));var y=document.createElement("div");y.classList.add("".concat(r,"__background")),y.setAttribute("data-modal-close",""),o.appendChild(y),s&&((function(e){if(Array.isArray(e))return a(e)})(e=this._modal.querySelectorAll("[data-modal-close]"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var o=({}).toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach(function(e){null!==l&&e.setAttribute("aria-label",l),e.addEventListener("click",function(e){e.preventDefault(),t._close()})})}},{key:"_detachModal",value:function(){var e=document.querySelectorAll(this.options.selector)[0];if(null!=e){var t=document.querySelector(".mfp-content")||document.body,o=t.childNodes;o&&o.length>0&&o.forEach(function(o){o.isEqualNode(e)&&t.removeChild(e)})}}},{key:"_keyboardControls",value:function(){var e=this;this._modal.focus(),this.options.enableClose&&this._modal.addEventListener("keydown",function(t){e._closeOnEsc(t)});var t=this._modal.querySelector("[data-modal-close]");t.addEventListener("keydown",function(e){e.keyCode===r.D.TAB&&e.shiftKey&&e.preventDefault()}),this._modal.querySelector("[data-modal-tab-target]").addEventListener("focus",function(){return t.focus()})}},{key:"_closeOnEsc",value:function(e){e.keyCode===r.D.ESC&&(e.preventDefault(),this._close())}},{key:"_open",value:function(e){var t=this;o.toggleContent(!0),this._attachModal(),this._modalContent.innerHTML="",this._modalContent.appendChild(e.cloneNode(!0)),this._modal.style.display="block",this.element.setAttribute("data-modal-return","true");var r=function(){t._modalContent.scrollTop===t._modalContent.scrollHeight-t._modalContent.offsetHeight?(t._modalFooter.style.opacity=0,requestAnimationFrame(function(){setTimeout(function(){t._modalFooter.style.display="none",t.isHidden=!0},10)})):t._modalContent.scrollTop!==t._modalContent.scrollHeight-t._modalContent.offsetHeight&&t.isHidden&&(t.isHidden=!1,t._modalFooter.style.display="block",requestAnimationFrame(function(){setTimeout(function(){t._modalFooter.style.opacity=1},10)}))};requestAnimationFrame(function(){if(t._modal.style.opacity=1,(0,n.Vb)(t._modalContent)?t._modalContent.addEventListener("scroll",r):t._modalFooter.style.display="none",t.options.fullScreenMode){document.documentElement.classList.add("modal-fullscreen");var e=document.querySelector(".Page__wrapper, #jaguar, #landrover");e&&(e.style.visibility="hidden")}setTimeout(function(){t._keyboardControls(),t._eventTrigger("".concat(t.options.className,":opened"))},t.options.speed)})}},{key:"_close",value:function(){var e=this;o.toggleContent(!1),requestAnimationFrame(function(){if(e._modal.style.opacity=0,e.options.fullScreenMode){var t=document.querySelector(".Page__wrapper, #jaguar, #landrover");t&&(t.style.visibility="visible"),document.documentElement.classList.remove("modal-fullscreen")}setTimeout(function(){e._modal.style.display="none",e._eventTrigger("".concat(e.options.className,":closed")),e._detachModal(),e.element.focus();var t=document.querySelectorAll("[data-modal-return]")[0];t.focus(),t.removeAttribute("data-modal-return")},e.options.speed)})}},{key:"_eventTrigger",value:function(e){var t=new CustomEvent(e);this.element.dispatchEvent(t)}},{key:"open",value:function(e){this._open(e)}},{key:"close",value:function(){this._close()}},{key:"resetKeyboardControls",value:function(){this._keyboardControls()}},{key:"modal",value:function(){return this._modal}}],t=[{key:"toggleContent",value:function(e){[document.querySelector(".pageWrapper"),document.querySelector(".Fullscreen"),document.querySelector(".sharedNavigation"),document.querySelector("body > #jaguar")||document.querySelector("body > #landrover"),document.querySelector("main"),document.querySelector(".footercontainer")].filter(function(e){return e instanceof HTMLElement}).forEach(function(t){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")})}}],e&&l(o.prototype,e),t&&l(o,t),Object.defineProperty(o,"prototype",{writable:!1}),o}()},44746:function(e,t,o){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o.r(t),o.d(t,{LOAD_TRIGGERED_EVENT:function(){return d},RESET_EVENT:function(){return s},default:function(){return c}});var r,i,a="cmp-video--playing",l="cmp-video__poster",s="reset",d="load-triggered",c=(r=function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.el=t,this.video=this.el.querySelector("video"),this.init()},i=[{key:"init",value:function(){this.video?this.setupCustomPlayer():this.setupYoutubePlayer()}},{key:"setupYoutubePlayer",value:function(){for(var e,t=$(this.el).find("img").attr("src"),o=$(this.el).find(".cmp-video__youtube-poster"),n=!1,r=o.contents(),i=r.length,a=null,l=0;l<i;l+=1)8===r[l].nodeType&&(a=r[l].textContent);var s=$(a);n=null===(e=$(a))||void 0===e||null===(e=e[0])||void 0===e?void 0:e.src,(void 0===t||""===t)&&a&&n&&(s[0].allow="autoplay",s[0].src="".concat(s[0].src,"?enablejsapi=1&autoplay=1&background=1&color=white&rel=0"),o.addClass("player").html(s),o.off("click")),o.on("click",function(){for(var e=$(this),t=e.contents(),o=t.length,r=null,i=0;i<o;i+=1)8===t[i].nodeType&&(r=t[i].textContent);if(r&&n){var a=$(r);a[0].allow="autoplay",a[0].src="".concat(a[0].src,"?enablejsapi=1&autoplay=1&background=1&color=white&rel=0"),e.addClass("player").html(a),e.off("click")}})}},{key:"setupCustomPlayer",value:function(){var e=!!this.el.dataset&&!!this.el.dataset.audioControls&&JSON.parse(this.el.dataset.audioControls),t=["playpause","progress","current","duration","tracks","fullscreen","a11y"];e&&t.splice(1,0,"volume"),new window.mejs.MediaElementPlayer(this.video,{stretching:"fill",poster:null,iPadUseNativeControls:!0,iPhoneUseNativeControls:!0,AndroidUseNativeControls:!0,clickToPlayPause:!0,features:t,enableKeyboard:!0}),this.setupListeners(),this.el.querySelector(".".concat(l))||this.setupPosterImage()}},{key:"setupPosterImage",value:function(){var e=this,t=this.el.dataset&&this.el.dataset.posterImgAltText?this.el.dataset.posterImgAltText:"",o=this.video.poster?this.video.poster:this.el.dataset.posterImg,n='<div class="'.concat(l,'" tabindex="0" role="button" aria-label="Play Video"><img width="100%" height="100%" src="').concat(o,'"\n     alt="').concat(t,'"></div>'),r=document.createElement("template");r.innerHTML=n;var i=r.content;this.el.appendChild(i);var a=function(){e.video.readyState>=2?e.video.play():(e.video.addEventListener("canplay",function t(){e.video.play(),e.video.removeEventListener("canplay",t)}),e.video.player?e.video.player.load():e.video.load(),e.video.dispatchEvent(new CustomEvent(d)))};this.el.querySelector(".".concat(l)).addEventListener("click",a),this.el.querySelector(".".concat(l)).addEventListener("keyup",function(e){return"Space"===e.code&&a()})}},{key:"setupListeners",value:function(){var e=this;this.video.addEventListener("emptied",function(){e.showPosterImage()}),this.video.addEventListener("ended",function(){e.showPosterImage()}),this.video.addEventListener("play",function(){e.hidePosterImage()}),this.video.addEventListener(s,function(){e.showPosterImage(),e.video.pause(),e.video.setCurrentTime(0)}),this.video.addEventListener("timeupdate",function(){var t=e.el.querySelector("video").closest(".cmp-carousel"),o=null==t?void 0:t.dataset.duration,n=null==t?void 0:t.dataset.autoplay,r=null==t?void 0:t.dataset.total;o&&r>1&&1e3*e.video.currentTime>=o&&(n||e.video.pause(),e.video.currentTime=0)})}},{key:"showPosterImage",value:function(){this.el.classList.remove(a)}},{key:"hidePosterImage",value:function(){this.el.classList.add(a)}}],function(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=n(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(r.key),r)}}(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r)}}]);