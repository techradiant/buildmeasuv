"use strict";(self.webpackChunkaem_maven_archetype=self.webpackChunkaem_maven_archetype||[]).push([["components-configuratorprompt-saved-build-template-js","components-configuratorprompt-cplayer-js","components-configuratorprompt-utils-js"],{47949:function(t,e,r){r.r(e),r.d(e,{adjustCPlayerImage:function(){return l},configuratorImageReduction:function(){return f},getBuildUrl:function(){return m},initCPlayer:function(){return p}});var n=r(2048),i=r(71202),a=r(31695),o=r(97874);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var u=document.querySelector(".ConfiguratorPrompt__saved-build-data")&&document.querySelector(".ConfiguratorPrompt__saved-build-data").getAttribute("data-cplayer-api-key"),f=function(t,e){return e?t-.3*t:t},l=function(t){if(u){var e=t.classList.contains("ConfiguratorPrompt--config-image-reduction"),r=t.querySelector(".CPlayer__innerdiv"),n=t.querySelector(".ConfiguratorPrompt__image"),i=t.querySelector("canvas"),c=t.querySelector(".canvas-container");if(i&&r&&n){if((i.offsetWidth<c.offsetWidth||"large"!==(0,a.pi)(!1))&&(r.style.width="initial"),"large"===(0,a.pi)(!1)){var l=e?100:130,s=(window.innerWidth-(o.Y+1))*((l-200)/(2e3-(o.Y+1)))+200;s=(s=f(s,e))<l?l:s,r.style.width="".concat(s,"%")}var d=r.offsetWidth,m=r.offsetHeight,p=n.offsetWidth,g=n.offsetHeight;r.style.marginLeft="".concat(-(d-p)/2,"px"),r.style.marginTop="".concat(-(m-g)/2,"px"),"large"!==(0,a.pi)(!1)&&e&&(r.style.marginTop="0px")}}},s=function(t){var e;((function(t){if(Array.isArray(t))return c(t)})(e=t.querySelectorAll(".CPlayer__innerdiv"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var r=({}).toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach(function(t,e){e>0&&t.parentNode.removeChild(t)})},d=function(t,e){s(t);var r=e.vehicleName,n=e.vehicleDetail,a=t.querySelector("canvas");(0,i.eA)(a)&&(a.setAttribute("aria-label","".concat(r," ").concat(n[0])),a.setAttribute("role","img")),l(t)},m=function(t){return t&&t.configWebUrl?t.configWebUrl:t&&t.currentBuildUrl},p=function(t,e,r){if(u){var i=m(e);if(i){var a=t.querySelector(".CPlayer__innerdiv");a&&a.parentNode.removeChild(a);var o={webUrl:i&&i.split("?")[0],layout:r,view:"exterior",currentFrame:0,frames:[0]},c=t.querySelector(".canvas-container");new n.A(c,{apiKey:u,scale:1,debug:!1,onLoadCallback:function(){d(t,e)}}).renderFrame(o)}}}},68850:function(t,e,r){r.r(e),r.d(e,{appendSavedView:function(){return v},findFeatureByName:function(){return u},findFirstPropertyValue:function(){return l},findObjectByKey:function(){return f},getNameplate:function(){return m},getSavedBuildAttribute:function(){return o},getVehicleId:function(){return p},getVehicleInfoString:function(){return s},outputAttribute:function(){return c},savedBuildTemplate:function(){return g},secondaryCtas:function(){return d}});var n=r(97874),i=r(47949),a=r(27404),o=function(t){var e=t.dataset;return Object.keys(e).forEach(function(t){e[t]=e[t].startsWith("cdx.cplayer.")?"":e[t]}),e},c=function(t){return t||""},u=function(t,e){return e.find(function(e){return e.name===t})},f=function(t,e){return e.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)})},l=function(t){return t[Object.keys(t)[0]]},s=function(t){var e=t["feature-dictionary"]["feature-list"],r=[];return["BODYSTYLE","ENGINE","SPECPACK"].forEach(function(t){var n=u(t,e);if(n){var i=f("description",n.feature);if(i){var a=l(i.description)||"";r.push(a.replace(/-/g,"&#8209;"))}}}),r.join(" | ")},d=function(t){var e=c(t.savedBuildsCtaText),r=c(t.savedBuildsCtaUrl),n=c(t.orderStockCtaText),i=c(t.orderStockCtaUrl);if((!e||!e)&&(!n||!i))return"";var a=function(t,e){return t&&e?'<a class="secondaryLinkWithStyle" href="'.concat(e,'"><span>').concat(t,"</span></a>"):""},o=a(e,r),u=a(n,i);return""===o&&""===u?"":'<div class="secondaryLinkContainer">\n      '.concat(a(e,r),"\n      ").concat(a(n,i),"\n    </div>")},m=function(t){return l(t["feature-dictionary"].vehicle.description)},p=function(t){return t["feature-dictionary"].vehicle.id},g=function(t,e,r){var n=o(e),i=m(t.configData);return'<section class="ConfiguratorPrompt ConfiguratorPrompt__saved-build ConfiguratorPrompt--show fontSmooth">\n    <div class="ConfiguratorPrompt__image">\n      <div class="canvas-container">\n        <img src="/resources/public/images/transparent-1x1.png" />\n      </div>\n    </div>\n    <div class="ConfiguratorPrompt__content">\n      <h2 class="ConfiguratorPrompt__header heading headingH3 fontH3">'.concat(c(n.heading),'</h2>\n      <h3 class="ConfiguratorPrompt__nameplate heading headingH4 fontH4">').concat(c(i),'</h3>\n      <div class="ConfiguratorPrompt__derivatives">').concat(s(t.configData),'</div>\n      <p class="ConfiguratorPrompt__copy fontBodyCopy">').concat(c(n.subHeading),'</p>\n      <div class="linkContainer">\n        <div class="primaryLinkContainer">\n          <a class="').concat(r,'" href="').concat(t.customerData.url,'"><span>').concat(c(n.primaryCtaText),"</span></a>\n        </div>\n        ").concat(d(n),"\n      </div>\n    </div>\n  </section>")},v=function(t,e,r){if(e){var o=document.createElement("div"),c=e.querySelector(".primaryLinkWithStyle").className||".primaryLinkWithStyle";o.innerHTML=g(t,r,c);var u=o.firstElementChild,f="ltr"===getComputedStyle(document.querySelector("html")).direction?"right":"left";u.setAttribute("data-intro-image-positioning",e.getAttribute("data-intro-image-positioning")||f),u.setAttribute("data-theme",e.getAttribute("data-theme")||"light"),e.after(u);var l={vehicleName:m(t.configData),vehicleDetail:s(t.configData),currentBuildUrl:t.customerData.url};enquire.register("screen and (min-width: ".concat(n.Y+1,"px)"),{match:function(){(0,i.initCPlayer)(u,l,"desktop")}}),enquire.register("screen and (max-width: ".concat(n.Y,"px)"),{match:function(){(0,i.initCPlayer)(u,l,"mobile")}});var d=p(t.configData);(0,a.nameplateRequiresImageResize)(d,u),window.addEventListener("resize",function(){(0,i.adjustCPlayerImage)(u)})}}},27404:function(t,e,r){r.r(e),r.d(e,{checkForValidConfigBuild:function(){return g},checkForValidQuoteBuild:function(){return p},deleteLegacyLocalStorage:function(){return u},getFinanceLabels:function(){return m},getFinanceOverrideLabels:function(){return l},getJsonFromItemByKey:function(){return s},getTimeDifferenceInDays:function(){return f},initEnquire:function(){return y},nameplateRequiresImageResize:function(){return b},parseVehicleDetails:function(){return v},prefixFinanceLabels:function(){return d},setupDefaultLink:function(){return h}});var n=r(47949),i=r(97874);function a(t,e){if(t){if("string"==typeof t)return c(t,e);var r=({}).toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function u(){var t,e=function(t){if(Array.isArray(t))return c(t)}(t=document.querySelectorAll(".ConfiguratorPrompt"))||o(t)||a(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(e.length){var r="jaguar"===e[0].getAttribute("data-brand")?"jag":"lr";localStorage.removeItem("ConfiguratorPrompt_".concat(r))}}function f(t){return(Date.now()-t)/864e5}function l(t){var e=t.getAttribute("data-finance-products");return e?JSON.parse(e.replace(/&quot;/g,'"')):[]}function s(t,e,r){var n=e[t],i=n.visibilityRules.getConfiguredNameplateKey();return n.visibilityRules.datastore.getItemByKey(i,"latest"!==i&&r)}function d(t){return t.getAttribute("data-prefix-labels-before-values")&&"true"===t.getAttribute("data-prefix-labels-before-values")}function m(t,e){var r=t.filter(function(t){return t.productName.toLowerCase()===e.product.name.toLowerCase()});return!!r.length&&r[0]}function p(t,e,r){if(!1===e[r])return!1;var n=s(r,e);return!(f(n.timestamp)>30)&&!!m(t,n)}function g(t){return!1!==t.config}function v(t){var e=[],r=[];if(t&&t.model&&e.push(t.model),t&&t.specpack&&e.push(t.specpack),t&&t.engine){var n,i=function(t){if(Array.isArray(t))return t}(n=t.engine.split("|"))||o(n)||a(n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=i[0],u=i.slice(1);e.push(c),u.forEach(function(t){return r.push(t.trim())})}return{vehicleDetailString:e.join(" | "),engineString:r.join(" | ")}}function y(t,e){enquire.register("screen and (min-width: ".concat(i.Y+1,"px)"),{match:function(){(0,n.initCPlayer)(t,e,"desktop")}}),enquire.register("screen and (max-width: ".concat(i.Y,"px)"),{match:function(){(0,n.initCPlayer)(t,e,"mobile")}})}function h(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#",n=t[e];if(n instanceof HTMLElement){var i=n.getAttribute("href");i&&"#"!==i||n.setAttribute("href",r)}}function b(t,e){var r=document.querySelector('meta[name="configurator-image-reduction"]'),n=r&&r.getAttribute("content"),i=n&&n.split(",").map(function(t){return t.trim().toLowerCase()});i&&i.length&&i.includes(t.toLowerCase())&&e.classList.add("ConfiguratorPrompt--config-image-reduction")}},97874:function(t,e,r){r.d(e,{Y:function(){return n}});var n=900}}]);